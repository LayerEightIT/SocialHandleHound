<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Social Handle Hound</title>
<meta name="theme-color" content="#0b1020" />
<style>
  :root{
    --bg-1: #1b003b;
    --bg-2: #001a4d;
    --panel: rgba(255,255,255,0.04);
    --muted: rgba(255,255,255,0.75);
    --accent: #7c5cff;
    --accent-2: #2ea3ff;
    --success: #4ade80;
    --danger: #ff6b6b;
    --warn: #ffb86b;
    --white: #ffffff;
    --radius: 10px;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  html,body{height:100%}
  body{
    margin:0;
    min-height:100%;
    color:var(--white);
    background: radial-gradient(1200px 600px at 10% 10%, rgba(124,92,255,0.12), transparent 8%),
                linear-gradient(180deg,var(--bg-1) 0%, var(--bg-2) 100%);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:28px;
    box-sizing:border-box;
  }

  .container{max-width:1100px;margin:0 auto}
  header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
  .logo{
    width:56px;height:56px;border-radius:12px;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    display:flex;align-items:center;justify-content:center;font-weight:800;color:#fff;font-size:20px;box-shadow:0 8px 30px rgba(2,6,23,0.6)
  }
  h1{font-size:20px;margin:0;font-weight:700}
  p.lead{margin:0;color:var(--muted);font-size:13px}

  .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
  input[type=text], select{
    background:var(--panel);
    border:1px solid rgba(255,255,255,0.06);
    color:var(--white);
    padding:10px 12px;
    border-radius:8px;
    min-width:220px;
    outline:none;
    transition:box-shadow .15s, transform .06s;
  }
  input[type=text]::placeholder{color:rgba(255,255,255,0.45)}
  input[type=text]:focus, select:focus{box-shadow:0 6px 18px rgba(0,0,0,0.45); transform:translateY(-1px)}

  button{
    background:linear-gradient(180deg,var(--accent), #5a3bff);
    color:var(--white);
    border:0;
    padding:10px 14px;
    border-radius:8px;
    cursor:pointer;
    font-weight:700;
    box-shadow:0 6px 18px rgba(92,64,255,0.12);
  }
  button.secondary{
    background:transparent;
    border:1px solid rgba(255,255,255,0.06);
    color:var(--white);
    box-shadow:none;
  }
  button:disabled{opacity:.45;cursor:default}

  .note{
    margin-top:12px;
    background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.04);
    padding:12px;
    border-radius:10px;
    color:var(--muted);
    font-size:13px;
  }

  table{
    width:100%;
    border-collapse:collapse;
    margin-top:16px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:10px;
    overflow:hidden;
    box-shadow: 0 8px 30px rgba(2,6,23,0.6);
  }
  thead th{
    text-align:left;
    padding:12px 14px;
    font-size:13px;
    color:var(--muted);
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    border-bottom:1px solid rgba(255,255,255,0.03);
  }
  tbody td{
    padding:12px 14px;
    font-size:14px;
    color:var(--white);
    border-bottom:1px solid rgba(255,255,255,0.02);
    vertical-align:middle;
  }
  tbody tr:last-child td{border-bottom:0}
  .platform{display:flex;gap:10px;align-items:center}
  .platform img{width:22px;height:22px;border-radius:6px;object-fit:cover;display:inline-block;filter:drop-shadow(0 2px 6px rgba(0,0,0,0.6))}

  .status{font-weight:700}
  .status-available{color:var(--success)}
  .status-taken{color:var(--danger)}
  .status-unknown{color:var(--warn)}

  footer{margin-top:14px;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
  .small{font-size:13px;color:var(--muted)}

  @media (max-width:720px){
    .controls{flex-direction:column;align-items:stretch}
    input[type=text]{min-width:100%}
    select{min-width:100%}
  }
</style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo" aria-hidden="true">SH</div>
      <div>
        <h1>Social Handle Hound</h1>
        <p class="lead">Find whether a handle is available across top social platforms. Use a CORS proxy for definitive results.</p>
      </div>
    </header>

    <div class="controls" role="region" aria-label="controls">
      <input id="handle" type="text" placeholder="example: yourbrand" aria-label="handle" />
      <select id="mode" aria-label="mode">
        <option value="fast">Fast client checks</option>
        <option value="proxy">Use CORS proxy</option>
      </select>
      <input id="proxy" type="text" placeholder="Optional proxy URL e.g. https://your-proxy.example/" aria-label="proxy" />
      <button id="checkBtn">Check availability</button>
      <button id="clearBtn" class="secondary">Clear</button>
    </div>

    <div class="note" role="note">
      <strong style="color:var(--white)">Tip</strong> — For reliable HTTP status codes use a CORS proxy. Without a proxy some platforms block cross-origin requests and results will show as Unknown.
    </div>

    <table id="results" aria-live="polite">
      <thead>
        <tr><th>Platform</th><th>Profile URL</th><th>Status</th></tr>
      </thead>
      <tbody></tbody>
    </table>

    <footer>
      <div class="small">Platforms checked: <strong style="color:var(--white)">25</strong></div>
      <div class="small">Results: <span class="status-available">Available</span>, <span class="status-taken">Taken</span>, <span class="status-unknown">Unknown</span></div>
    </footer>
  </div>

<script>
const platforms = [
  {id:'x', name:'X (Twitter)', url:'https://x.com/{u}', avatar:'https://x.com/{u}/profile_image?size=original'},
  {id:'facebook', name:'Facebook', url:'https://www.facebook.com/{u}'},
  {id:'instagram', name:'Instagram', url:'https://www.instagram.com/{u}/', avatar:'https://www.instagram.com/{u}/media/?size=l'},
  {id:'linkedin', name:'LinkedIn', url:'https://www.linkedin.com/in/{u}'},
  {id:'tiktok', name:'TikTok', url:'https://www.tiktok.com/@{u}'},
  {id:'youtube', name:'YouTube', url:'https://www.youtube.com/@{u}'},
  {id:'pinterest', name:'Pinterest', url:'https://www.pinterest.com/{u}/'},
  {id:'snapchat', name:'Snapchat', url:'https://www.snapchat.com/add/{u}'},
  {id:'reddit', name:'Reddit', url:'https://www.reddit.com/user/{u}'},
  {id:'tumblr', name:'Tumblr', url:'https://{u}.tumblr.com/'},
  {id:'github', name:'GitHub', url:'https://github.com/{u}', avatar:'https://github.com/{u}.png'},
  {id:'gitlab', name:'GitLab', url:'https://gitlab.com/{u}'},
  {id:'stackoverflow', name:'Stack Overflow', url:'https://stackoverflow.com/users/{u}'},
  {id:'medium', name:'Medium', url:'https://medium.com/@{u}'},
  {id:'twitch', name:'Twitch', url:'https://www.twitch.tv/{u}', avatar:'https://static-cdn.jtvnw.net/jtv_user_pictures/{u}-profile_image-70x70.png'},
  {id:'discord', name:'Discord (username)', url:'https://discord.com/users/{u}'},
  {id:'mastodon', name:'Mastodon (example instance)', url:'https://mastodon.social/@{u}'},
  {id:'behance', name:'Behance', url:'https://www.behance.net/{u}'},
  {id:'dribbble', name:'Dribbble', url:'https://dribbble.com/{u}'},
  {id:'soundcloud', name:'SoundCloud', url:'https://soundcloud.com/{u}'},
  {id:'vimeo', name:'Vimeo', url:'https://vimeo.com/{u}'},
  {id:'flickr', name:'Flickr', url:'https://www.flickr.com/people/{u}'},
  {id:'etsy', name:'Etsy', url:'https://www.etsy.com/people/{u}'},
  {id:'angellist', name:'AngelList', url:'https://angel.co/u/{u}'},
  {id:'producthunt', name:'Product Hunt', url:'https://www.producthunt.com/@{u}'}
];

const tbody = document.querySelector('#results tbody');
const handleInput = document.getElementById('handle');
const checkBtn = document.getElementById('checkBtn');
const clearBtn = document.getElementById('clearBtn');
const proxyInput = document.getElementById('proxy');
const modeSelect = document.getElementById('mode');

function makeRow(platform, profileUrl){
  const tr = document.createElement('tr');
  tr.dataset.platform = platform.id;
  tr.innerHTML = `<td class="platform"><img src="" alt="" onerror="this.style.display='none'"><strong>${platform.name}</strong></td>
                  <td><a href="${profileUrl}" target="_blank" rel="noopener noreferrer">${profileUrl}</a></td>
                  <td class="status small">Checking…</td>`;
  return tr;
}

function setStatus(tr, status, text){
  const td = tr.querySelector('td.status');
  td.className = 'status small';
  if(status === 'available'){ td.classList.add('status-available'); td.textContent = text || 'Available'; }
  else if(status === 'taken'){ td.classList.add('status-taken'); td.textContent = text || 'Taken'; }
  else { td.classList.add('status-unknown'); td.textContent = text || 'Unknown'; }
}

function buildProfileUrl(pattern, user){
  return pattern.replace(/\{u\}/g, encodeURIComponent(user));
}

function imageProbe(url, timeout = 6000){
  return new Promise((resolve) => {
    const img = new Image();
    let done = false;
    const timer = setTimeout(()=>{ if(!done){ done=true; resolve({ok:false, reason:'timeout'}); img.src=''; } }, timeout);
    img.onload = ()=>{ if(!done){ done=true; clearTimeout(timer); resolve({ok:true}); } };
    img.onerror = ()=>{ if(!done){ done=true; clearTimeout(timer); resolve({ok:false, reason:'error'}); } };
    img.src = url + (url.includes('?') ? '&' : '?') + '_=' + Date.now();
  });
}

async function fetchViaProxy(proxyBase, targetUrl, method='HEAD', timeout=8000){
  try{
    const url = proxyBase.endsWith('/') ? proxyBase + '?url=' + encodeURIComponent(targetUrl) : proxyBase + '?url=' + encodeURIComponent(targetUrl);
    const controller = new AbortController();
    const id = setTimeout(()=>controller.abort(), timeout);
    const resp = await fetch(url, {method, signal: controller.signal});
    clearTimeout(id);
    return {ok: resp.ok, status: resp.status};
  }catch(err){
    return {ok:false, error: err && err.name === 'AbortError' ? 'timeout' : (err && err.message) || 'fetch-error'};
  }
}

async function fetchDirect(targetUrl, method='HEAD', timeout=7000){
  try{
    const controller = new AbortController();
    const id = setTimeout(()=>controller.abort(), timeout);
    const resp = await fetch(targetUrl, {method, mode:'cors', cache:'no-store', signal: controller.signal});
    clearTimeout(id);
    return {ok: resp.ok, status: resp.status};
  }catch(err){
    return {ok:false, error: err && err.name === 'AbortError' ? 'timeout' : (err && err.message) || 'fetch-error'};
  }
}

async function checkPlatform(platform, user, proxy){
  const profileUrl = buildProfileUrl(platform.url, user);
  if(platform.avatar){
    const avatarUrl = buildProfileUrl(platform.avatar, user);
    try{
      const imgRes = await imageProbe(avatarUrl);
      if(imgRes.ok) return {status:'taken', reason:'avatar found', profileUrl};
    }catch(e){}
  }

  if(proxy){
    const proxyRes = await fetchViaProxy(proxy, profileUrl, 'HEAD');
    if(proxyRes && proxyRes.status){
      if(proxyRes.status >= 200 && proxyRes.status < 400) return {status:'taken', reason:`HTTP ${proxyRes.status}`, profileUrl};
      if(proxyRes.status === 404 || proxyRes.status === 410) return {status:'available', reason:`HTTP ${proxyRes.status}`, profileUrl};
      return {status:'unknown', reason:`HTTP ${proxyRes.status}`, profileUrl};
    } else {
      return {status:'unknown', reason: proxyRes.error || 'proxy-failed', profileUrl};
    }
  }

  const direct = await fetchDirect(profileUrl, 'HEAD');
  if(direct && direct.status){
    if(direct.status >= 200 && direct.status < 400) return {status:'taken', reason:`HTTP ${direct.status}`, profileUrl};
    if(direct.status === 404 || direct.status === 410) return {status:'available', reason:`HTTP ${direct.status}`, profileUrl};
    return {status:'unknown', reason:`HTTP ${direct.status}`, profileUrl};
  }

  try{
    const imgRes = await imageProbe(profileUrl);
    if(imgRes.ok) return {status:'taken', reason:'page loaded as image', profileUrl};
  }catch(e){}

  return {status:'unknown', reason: direct.error || 'CORS or blocked', profileUrl};
}

async function runChecks(user, proxy){
  tbody.innerHTML = '';
  const rows = {};
  for(const p of platforms){
    const profileUrl = buildProfileUrl(p.url, user);
    const tr = makeRow(p, profileUrl);
    tbody.appendChild(tr);
    rows[p.id] = tr;
  }

  const concurrency = 6;
  let i = 0;
  async function worker(){
    while(i < platforms.length){
      const idx = i++;
      const p = platforms[idx];
      const tr = rows[p.id];
      try{
        const res = await checkPlatform(p, user, proxy);
        if(res.status === 'taken') setStatus(tr, 'taken', 'Taken');
        else if(res.status === 'available') setStatus(tr, 'available', 'Available');
        else setStatus(tr, 'unknown', 'Unknown (CORS or blocked)');
      }catch(err){
        setStatus(tr, 'unknown', 'Error');
      }
    }
  }
  const workers = [];
  for(let w=0; w<concurrency; w++) workers.push(worker());
  await Promise.all(workers);
}

checkBtn.addEventListener('click', async ()=>{
  const user = (handleInput.value || '').trim();
  if(!user){ alert('Enter a handle to check.'); handleInput.focus(); return; }
  checkBtn.disabled = true;
  clearBtn.disabled = true;
  const proxyMode = modeSelect.value === 'proxy';
  const proxy = proxyMode ? (proxyInput.value.trim() || null) : null;
  if(proxyMode && !proxy){
    if(!confirm('Proxy mode selected but no proxy URL provided. Continue with client-only checks?')){ checkBtn.disabled=false; clearBtn.disabled=false; return; }
  }
  try{
    await runChecks(user, proxy);
  }finally{
    checkBtn.disabled = false;
    clearBtn.disabled = false;
  }
});

clearBtn.addEventListener('click', ()=>{
  handleInput.value = '';
  tbody.innerHTML = '';
  proxyInput.value = '';
});
</script>
</body>
</html>
